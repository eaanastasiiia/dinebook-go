# DineBook - Система бронирования столиков

DineBook - это веб-приложение для бронирования столиков в ресторане, написанное на Go. Система позволяет клиентам бронировать столики онлайн, а администраторам управлять бронированиями.

## Функциональность

### Для клиентов:
- Бронирование столика с указанием даты, времени и количества гостей
- Просмотр своих бронирований по номеру телефона
- Отмена бронирования
- Мобильная адаптация интерфейса

### Для администраторов:
- Панель управления бронированиями
- Подтверждение и отмена бронирований
- Просмотр всех бронирований
- Фильтрация по статусу

## Требования

- Go 1.16 или выше
- PostgreSQL 12 или выше
- DBeaver (или другой SQL-клиент) для управления базой данных

## Установка и запуск

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/dinebook-go.git
cd dinebook-go
```

2. Установите зависимости:
```bash
go mod tidy
```

3. Создайте базу данных PostgreSQL:
```sql
CREATE DATABASE dinebook;
```

4. Настройте конфигурацию в файле `config.go`:
```go
type Config struct {
    DBHost     string
    DBPort     string
    DBUser     string
    DBPassword string
    DBName     string
    DBSSLMode  string
    AdminUsername string
    AdminPassword string
}
```

5. Соберите и запустите приложение:
```bash
go build
./dinebook-go
```

Приложение будет доступно по адресу: http://localhost:8080

## Доступ к админ-панели

По умолчанию создается администратор со следующими учетными данными:
- Логин: `admin`
- Пароль: `admin123`

Админ-панель доступна по адресу: http://localhost:8080/admin

## Структура базы данных

### Таблица `bookings`:
- `id` - уникальный идентификатор бронирования
- `name` - имя клиента
- `phone` - номер телефона
- `booking_date` - дата бронирования
- `booking_time` - время бронирования
- `guests` - количество гостей
- `comments` - комментарии к бронированию
- `status` - статус бронирования (pending/confirmed/cancelled)
- `created_at` - дата создания записи
- `updated_at` - дата последнего обновления

### Таблица `users`:
- `id` - уникальный идентификатор пользователя
- `username` - имя пользователя
- `password_hash` - хэш пароля
- `is_admin` - флаг администратора
- `created_at` - дата создания записи

## API Endpoints

### Публичные:
- `GET /` - главная страница
- `POST /api/book` - создание бронирования
- `GET /api/bookings?phone={phone}` - получение бронирований по телефону
- `PUT /api/bookings/{id}/status` - обновление статуса бронирования

### Административные:
- `GET /admin/login` - страница входа в админ-панель
- `POST /admin/login` - авторизация администратора
- `GET /admin` - панель управления бронированиями
- `GET /admin/bookings` - получение списка всех бронирований
- `PUT /admin/bookings/{id}/status` - обновление статуса бронирования

## Безопасность

- Все пароли хранятся в хэшированном виде
- Административные маршруты защищены middleware аутентификации
- Сессии администраторов имеют ограниченное время жизни

## Разработка

Для разработки рекомендуется использовать:
- GoLand или VS Code с Go-плагинами
- DBeaver для работы с базой данных
- Postman или curl для тестирования API

## Лицензия

MIT License 
